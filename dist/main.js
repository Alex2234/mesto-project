(()=>{"use strict";var e,t=document.querySelectorAll(".popup"),n=document.getElementById("popup_info-edit"),o=document.querySelector(".info__edit-button"),r=document.querySelectorAll(".popup__button-close"),c=document.querySelector(".info__title"),a=document.querySelector(".info__subtitle"),i=document.getElementById("popup_image"),u=document.querySelector(".popup__image"),s=document.querySelector(".popup__title-image"),d=document.querySelector(".elements"),l=document.forms.form_info,m=document.forms.form_card,p=document.getElementById("input_names"),f=document.getElementById("input_job"),v=document.querySelector(".profile__add-button"),_=document.getElementById("popup_add"),y=document.getElementById("input_nameCard"),E=document.getElementById("input_link");function g(e){"Escape"===e.key&&S(document.querySelector(".popup_opened"))}function k(e){e.classList.add("popup_opened"),document.addEventListener("keydown",g)}function S(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",g)}function L(e,t){var n=document.querySelector("#card").content.querySelector(".element").cloneNode(!0),o=n.querySelector(".element__foto"),r=n.querySelector(".element__title");return o.src=e,o.alt=t,r.textContent=t,n.querySelector(".element__like").addEventListener("click",(function(e){e.target.classList.toggle("element__like_active")})),o.addEventListener("click",(function(){k(i),u.src=e,u.alt=t,s.textContent=t})),n.querySelector(".element__delete").addEventListener("click",(function(e){n.remove()})),n}function q(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove("".concat(n.inactiveButtonClass))):(t.disabled=!0,t.classList.add("".concat(n.inactiveButtonClass)))}document.getElementById("edit_save_btn"),document.getElementById("add_save_btn"),r.forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){return S(t)}))})),t.forEach((function(e){e.addEventListener("click",(function(t){t.target===t.currentTarget&&S(e)}))})),o.addEventListener("click",(function(){k(n),p.value=c.textContent,f.value=a.textContent})),l.addEventListener("submit",(function(e){e.preventDefault();var t=p.value,o=f.value;c.textContent=t,a.textContent=o,S(n)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){d.append(L(e.link,e.name))})),v.addEventListener("click",(function(){k(_)})),m.addEventListener("submit",(function(e){e.preventDefault(),d.prepend(L(E.value,y.value)),e.target.reset(),S(_)})),e={formSelector:"form",inputSelector:"form__input",submitButtonSelector:"form__button-save",inactiveButtonClass:"form__button-save_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},Array.from(document.querySelectorAll(".".concat(e.formSelector))).forEach((function(t){t.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){var n=Array.from(e.querySelectorAll(".".concat(t.inputSelector))),o=e.querySelector(".".concat(t.submitButtonSelector));q(n,o,t),e.parentElement.addEventListener("reset",(function(){setTimeout((function(){q(n,o,t)}),0)})),n.forEach((function(r){r.addEventListener("input",(function(){!function(e,t,n){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("".concat(n.inputErrorClass)),o.classList.remove("".concat(n.errorClass)),o.textContent=""}(e,t,n):function(e,t,n,o){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add("".concat(o.inputErrorClass)),r.textContent=n,r.classList.add("".concat(o.errorClass))}(e,t,t.validationMessage,n)}(e,r,t),q(n,o,t)}))}))}(t,e)}))})();